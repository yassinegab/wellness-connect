{% extends 'base.html.twig' %}

{% block title %}Admin - Hôpital #{{ hopital.id }}{% endblock %}

{% block body %}
<div class="flex min-h-screen bg-gray-50">

    {% include 'components/sidebar.html.twig' %}

    <div class="flex flex-1 flex-col lg:ml-72">

        {% include 'components/top-nav.html.twig' %}

        <main class="flex-1 overflow-auto">
            <div class="mx-auto max-w-4xl space-y-6 p-4 lg:p-8">

                <div class="flex items-center justify-between">
                    <h1 class="text-3xl font-bold text-gray-900">
                        <i class="fas fa-hospital text-blue-600 mr-2"></i>
                        {{ hopital.nom }}
                    </h1>

                    <a href="{{ path('admin_rendez_vous_index') }}"
                       class="px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300">
                        <i class="fas fa-arrow-left mr-2"></i>Retour
                    </a>
                </div>

                <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-6">
                    <dl class="grid grid-cols-1 md:grid-cols-2 gap-6">

                        <div class="bg-blue-50 rounded-lg p-4">
                            <dt class="text-sm font-medium text-gray-500 mb-2">Nom</dt>
                            <dd class="text-lg font-semibold text-gray-900">
                                {{ hopital.nom }}
                            </dd>
                        </div>

                        <div class="bg-purple-50 rounded-lg p-4">
                            <dt class="text-sm font-medium text-gray-500 mb-2">Adresse</dt>
                            <dd class="text-lg font-semibold text-gray-900">
                                {{ hopital.adresse }}
                            </dd>
                        </div>

                        <div class="bg-orange-50 rounded-lg p-4">
                            <dt class="text-sm font-medium text-gray-500 mb-2">Téléphone</dt>
                            <dd class="text-lg font-semibold text-gray-900">
                                {{ hopital.tel }}
                            </dd>
                        </div>

                        <div class="bg-green-50 rounded-lg p-4">
                            <dt class="text-sm font-medium text-gray-500 mb-2">Service d'urgence</dt>
                            <dd class="text-lg font-semibold">
                                {% if hopital.serviceUrgenceDispo %}
                                    <span class="text-green-600">
                                        <i class="fas fa-check-circle mr-1"></i> Disponible
                                    </span>
                                {% else %}
                                    <span class="text-red-600">
                                        <i class="fas fa-times-circle mr-1"></i> Non disponible
                                    </span>
                                {% endif %}
                            </dd>
                        </div>

                        {% if hopital.capacite %}
                            <div class="bg-indigo-50 rounded-lg p-4">
                                <dt class="text-sm font-medium text-gray-500 mb-2">Capacité</dt>
                                <dd class="text-lg font-semibold text-gray-900">
                                    {{ hopital.capacite }} lits
                                </dd>
                            </div>
                        {% endif %}

                        {% if hopital.latitude and hopital.longitude %}
                            <div class="md:col-span-2 bg-gray-50 rounded-lg p-4">
                                <dt class="text-sm font-medium text-gray-500 mb-2">Localisation</dt>
                                <dd class="text-gray-900">
                                    Latitude : {{ hopital.latitude }} <br>
                                    Longitude : {{ hopital.longitude }}
                                </dd>
                            </div>
                        {% endif %}

                    </dl>

                    <div class="flex gap-4 mt-6 pt-6 border-t">
                        <a href="{{ path('admin_hopital_edit', {'id': hopital.id}) }}"
                           class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700">
                            <i class="fas fa-edit mr-2"></i>Modifier
                        </a>

                        <button onclick="confirmDelete()"
                                class="px-6 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700">
                            <i class="fas fa-trash mr-2"></i>Supprimer
                        </button>

                        <form id="delete-form"
                              method="post"
                              action="{{ path('admin_hopital_delete', {'id': hopital.id}) }}"
                              style="display: none;">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ hopital.id) }}">
                        </form>
                    </div>
                </div>

            </div>
        </main>

    </div>
</div>

<script>
function confirmDelete() {
    if (confirm('Supprimer cet hôpital ?')) {
        document.getElementById('delete-form').submit();
    }
}
</script>
{% endblock %}
