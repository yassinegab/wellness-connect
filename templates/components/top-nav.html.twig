<header class="sticky top-0 z-30 flex h-16 items-center justify-between border-b border-border bg-card px-4 lg:px-6">
  
  <div class="flex items-center gap-4">
    {# Mobile Menu Toggle #}
    <button 
      type="button"
      class="inline-flex items-center justify-center rounded-md p-2 text-muted-foreground hover:bg-accent hover:text-accent-foreground lg:hidden"
      @click="sidebarOpen = !sidebarOpen"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="3" x2="21" y1="6" y2="6"/><line x1="3" x2="21" y1="12" y2="12"/><line x1="3" x2="21" y1="18" y2="18"/></svg>
      <span class="sr-only">Ouvrir le menu</span>
    </button>

    <div class="relative hidden md:block">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground lucide lucide-search"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
      <input
        type="search"
        placeholder="Rechercher..."
        class="flex h-9 w-64 rounded-md border border-input bg-transparent px-9 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"
      />
    </div>
  </div>

  <div class="flex items-center gap-3">
    
    <div class="relative" x-data="{ open: false }" @click.away="open = false">
      <button 
        @click="open = !open"
        class="relative inline-flex h-9 w-9 items-center justify-center rounded-md hover:bg-accent hover:text-accent-foreground"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
        <span class="absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-destructive"></span>
        <span class="sr-only">Notifications</span>
      </button>

      <div 
        x-show="open" 
        x-transition 
        class="absolute right-0 mt-2 w-80 origin-top-right rounded-md border border-border bg-popover p-1 text-popover-foreground shadow-md z-50"
      >
        <div class="px-2 py-1.5 text-sm font-semibold">Notifications</div>
        <div class="h-px bg-muted -mx-1 my-1"></div>
        
        {% set notifications = [
          {'title': "Rappel d'hydratation", 'desc': "N'oubliez pas de boire de l'eau !", 'time': 'Il y a 30 min'},
          {'title': "Objectif atteint !", 'desc': "Vous avez atteint 10 000 pas.", 'time': 'Il y a 2h'}
        ] %}

        {% for n in notifications %}
          <div class="flex flex-col gap-1 rounded-sm px-2 py-1.5 text-sm hover:bg-accent cursor-pointer transition-colors">
            <p class="font-medium">{{ n.title }}</p>
            <p class="text-xs text-muted-foreground">{{ n.desc }} {{ n.time }}</p>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="relative" x-data="{ open: false }" @click.away="open = false">
      <button 
        @click="open = !open"
        class="flex items-center gap-3 px-2 py-1.5 rounded-md hover:bg-accent transition-colors"
      >
        <div class="relative flex h-8 w-8 shrink-0 overflow-hidden rounded-full">
          <img class="aspect-square h-full w-full" src="/placeholder-user.jpg" alt="Marie Dupont">
          {# Fallback logic if image fails #}
          <div class="flex h-full w-full items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground">MD</div>
        </div>
        <span class="hidden text-sm font-medium md:block">Marie Dupont</span>
      </button>

      <div 
        x-show="open" 
        x-transition 
        class="absolute right-0 mt-2 w-48 origin-top-right rounded-md border border-border bg-popover p-1 text-popover-foreground shadow-md z-50"
      >
        <div class="px-2 py-1.5 text-sm font-semibold">Mon compte</div>
        <div class="h-px bg-muted -mx-1 my-1"></div>
        <a href="#" class="block rounded-sm px-2 py-1.5 text-sm hover:bg-accent">Profil</a>
        <a href="#" class="block rounded-sm px-2 py-1.5 text-sm hover:bg-accent">Paramètres</a>
        <div class="h-px bg-muted -mx-1 my-1"></div>
        <a href="#" class="block rounded-sm px-2 py-1.5 text-sm text-destructive hover:bg-accent">Déconnexion</a>
      </div>
    </div>

  </div>
</header>